<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bloqueos Viales</title>
    <link rel="stylesheet" href="Secured-Landing-Page/public/assets/styles/bloqueos-viales.css" />
</head>
<body>

<!-- VISTA 1: Lista de bloqueos viales (con mapa) -->
<div id="vista-mapa-bloqueos" class="vista active">
    <header class="header">
        <button class="back-btn" onclick="window.location.href='variaciones-varias.html'">‚Üê</button>
        <div class="header-content">
            <h1>Bloqueos Viales</h1>
            <p class="subtitle" id="contador-bloqueos">2 activos ¬∑ 2 total</p>
        </div>
        <button class="nuevo-btn" onclick="abrirNuevoBloqueo()">+ Nuevo bloqueo</button>
    </header>

    <!-- Filtros y alerta -->
    <div class="controles-bar">
        <button class="filtros-btn" onclick="mostrarVistaFiltrada()">
            <span class="filtro-icon">‚öôÔ∏è</span> Filtros
        </button>
    </div>

    <!-- Alerta de reportes pendientes -->
    <div class="alerta-reportes">
        <div class="alerta-icon">‚ö†Ô∏è</div>
        <div class="alerta-content">
            <strong>Reportes pendientes de validaci√≥n</strong>
            <p>1 reporte desde campo</p>
        </div>
    </div>

    <!-- Mapa con bloqueos -->
    <div class="mapa-container">
        <img src="Secured-Landing-Page/public/assets/images/bloqueos-viales-1.png" alt="Mapa de bloqueos" class="mapa-img" />

        <!-- Controles del mapa -->
        <div class="mapa-controles">
            <button class="control-btn recalcular">üîÑ Recalcular ruta</button>
            <button class="control-btn vista-movil">üì± Vista m√≥vil</button>
            <button class="control-btn estados">üìä Estados</button>
        </div>
    </div>
</div>

<!-- VISTA 2: Lista filtrada de bloqueos -->
<div id="vista-lista-bloqueos" class="vista">
    <header class="header">
        <button class="back-btn" onclick="volverAMapaBloqueos()">‚Üê</button>
        <div class="header-content">
            <h1>Bloqueos Viales</h1>
            <p class="subtitle">2 activos ¬∑ 2 total</p>
        </div>
        <button class="nuevo-btn" onclick="abrirNuevoBloqueo()">+ Nuevo bloqueo</button>
    </header>

    <!-- Filtros activos -->
    <div class="filtros-activos-bar">
        <button class="filtro-chip active">
            <span class="filtro-icon">‚öôÔ∏è</span> Filtros
        </button>
    </div>

    <!-- Lista de bloqueos -->
    <div class="bloqueos-lista">
        <!-- Bloqueo 1: Av. Arequipa -->
        <div class="bloqueo-card" onclick="verDetalleBloqueo('blq-001')">
            <div class="bloqueo-header">
                <div class="bloqueo-icon">üìç</div>
                <div class="bloqueo-info">
                    <h3>Av. Arequipa</h3>
                    <div class="bloqueo-badges">
                        <span class="badge activo">‚≠ï Activo</span>
                        <span class="badge total">‚≠ï Total</span>
                        <span class="tipo-badge">Obra</span>
                    </div>
                </div>
            </div>
            <p class="bloqueo-descripcion">Obras de ampliaci√≥n de veredas. Cierre total entre Jr. Lampa y Jr. Caman√°.</p>
            <div class="bloqueo-fechas">
                <div class="fecha-item">
                    <span class="fecha-icon">üìÖ</span>
                    <span>Inicio: 01-nov., 08:00 a. m.</span>
                </div>
                <div class="fecha-item">
                    <span class="fecha-icon">üìÖ</span>
                    <span>Fin: 15-nov., 06:00 p. m.</span>
                </div>
            </div>
            <div class="bloqueo-desvio">
                <span class="desvio-icon">‚ûú</span>
                <span class="desvio-texto">Desv√≠o sugerido</span>
                <p class="desvio-ruta">+5 min ¬∑ Jr. Lampa ‚Üí Av. Tacna ‚Üí Jr. Caman√°</p>
            </div>
        </div>

        <!-- Bloqueo 2: Jr. de la Uni√≥n -->
        <div class="bloqueo-card" onclick="verDetalleBloqueo('blq-002')">
            <div class="bloqueo-header">
                <div class="bloqueo-icon">üìç</div>
                <div class="bloqueo-info">
                    <h3>Jr. de la Uni√≥n</h3>
                    <div class="bloqueo-badges">
                        <span class="badge activo">‚≠ï Activo</span>
                        <span class="badge parcial">‚≠ï Parcial</span>
                        <span class="tipo-badge">Manifestaci√≥n</span>
                    </div>
                </div>
            </div>
            <p class="bloqueo-descripcion">Manifestaci√≥n pac√≠fica. Permitir paso solo a veh√≠culos de emergencia.</p>
            <div class="bloqueo-fechas">
                <div class="fecha-item">
                    <span class="fecha-icon">üìÖ</span>
                    <span>Inicio: 01-nov., 02:00 p. m.</span>
                </div>
                <div class="fecha-item">
                    <span class="fecha-icon">üìÖ</span>
                    <span>Fin: 01-nov., 06:00 p. m.</span>
                </div>
            </div>
            <div class="bloqueo-advertencia">
                <span class="advertencia-icon">‚ö†Ô∏è</span>
                <span>Paso permitido: Patrulla S-15, Patrulla S-22</span>
            </div>
        </div>
    </div>
</div>

<!-- VISTA 3: Nuevo bloqueo vial (formulario vac√≠o) -->
<div id="vista-nuevo-bloqueo" class="vista">
    <header class="header">
        <button class="back-btn" onclick="cerrarNuevoBloqueo()">‚Üê</button>
        <div class="header-content">
            <h1>Nuevo bloqueo vial</h1>
            <p class="subtitle">Trazar tramo y definir vigencia</p>
        </div>
        <button class="publicar-btn" onclick="publicarBloqueo()">üìÑ Publicar</button>
    </header>

    <div class="formulario-container">
        <!-- Columna izquierda: Informaci√≥n b√°sica -->
        <div class="formulario-izquierda">
            <div class="seccion-form">
                <h2>Informaci√≥n b√°sica</h2>

                <div class="form-group">
                    <label>Nombre de la v√≠a <span class="requerido">*</span></label>
                    <input type="text" id="nombre-via" placeholder="Ej: Av. Arequipa" />
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Motivo <span class="requerido">*</span></label>
                        <input type="text" id="motivo-bloqueo" placeholder="" />
                    </div>
                    <div class="form-group">
                        <label>Nivel <span class="requerido">*</span></label>
                        <input type="text" id="nivel-bloqueo" placeholder="" />
                    </div>
                </div>

                <div class="form-group">
                    <label>Sector <span class="requerido">*</span></label>
                    <input type="text" id="sector-bloqueo" placeholder="Ej: Centro" />
                </div>

                <div class="form-group">
                    <label>Fecha/hora inicio <span class="requerido">*</span></label>
                    <input type="datetime-local" id="inicio-bloqueo" />
                </div>

                <div class="form-group">
                    <label>Fecha/hora fin <span class="requerido">*</span></label>
                    <input type="datetime-local" id="fin-bloqueo" />
                </div>

                <div class="form-group">
                    <label>Notas</label>
                    <textarea id="notas-bloqueo" placeholder="Detalles adicionales..."></textarea>
                </div>
            </div>

            <div class="seccion-desvio">
                <button class="btn-desvio" onclick="definirDesvio()">
                    <span class="desvio-icon">üîÄ</span>
                    <span>Definir desv√≠o sugerido</span>
                </button>
            </div>
        </div>

        <!-- Columna derecha: Mapa y herramientas -->
        <div class="formulario-derecha">
            <div class="seccion-mapa">
                <div class="mapa-header">
                    <div class="mapa-icon">üìç</div>
                    <h3>Tramo afectado</h3>
                </div>

                <div class="mapa-editor">
                    <img src="Secured-Landing-Page/public/assets/images/bloqueos-viales-2.png" alt="Mapa editor" class="mapa-editor-img" />

                    <div class="herramienta-trazo">
                        <span class="herramienta-icon">‚úèÔ∏è</span>
                        <span class="herramienta-texto">Herramienta de trazo</span>
                        <p class="herramienta-instruccion">Traza el segmento de v√≠a afectado</p>
                    </div>
                </div>

                <div class="instruccion-box">
                    <span class="instruccion-icon">‚ÑπÔ∏è</span>
                    <p>Dibuja la polil√≠nea sobre el tramo bloqueado en el mapa</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Toast de confirmaci√≥n -->
<div id="toast-confirmacion" class="toast">
    <span class="toast-icon">‚úì</span>
    <span class="toast-texto">ETA creado correctamente</span>
</div>

<!-- JS espec√≠fico -->
<script src="Secured-Landing-Page/public/assets/scripts/bloqueos-viales.js"></script>
</body>
</html>

