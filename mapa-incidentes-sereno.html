<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mapa de incidentes</title>
    <link rel="stylesheet" href="Secured-Landing-Page/public/assets/styles/mapa-incidentes.css" />
</head>
<body>

<!-- VISTA 1: Mapa de incidentes -->
<div id="vista-mapa" class="vista active">
    <header class="header">
        <button class="back-btn" onclick="window.location.href='home-serenazgo.html'">‚Üê</button>
        <h1>Mapa de incidentes</h1>
        <button class="menu-btn" onclick="toggleMenu()">‚ò∞</button>
    </header>

    <!-- Buscador -->
    <div class="search-bar">
        <input type="text" placeholder="Buscar por c√≥digo, placa o texto..." />
    </div>

    <!-- Filtros de prioridad -->
    <div class="priority-filters">
        <button class="filter-btn" onclick="toggleFiltrosModal()">
            <span class="icon">‚öôÔ∏è</span> Filtros
        </button>
        <button class="priority-btn alta" onclick="filtrarPorPrioridad('alta')" data-prioridad="alta">Alta</button>
        <button class="priority-btn media" onclick="filtrarPorPrioridad('media')" data-prioridad="media">Media</button>
        <button class="priority-btn baja" onclick="filtrarPorPrioridad('baja')" data-prioridad="baja">Baja</button>
    </div>

    <!-- Contador de incidentes y quitar filtros -->
    <div class="resultados-header">
        <span id="contador-incidentes">Mostrando 3 incidentes</span>
        <button class="quitar-filtros" onclick="quitarFiltros()">‚úï Quitar filtros</button>
    </div>

    <!-- Mapa -->
    <div class="mapa-container">
        <img src="Secured-Landing-Page/public/assets/images/mapa-incidentes.png" alt="Mapa" class="mapa-img" />

        <!-- Badge de incidentes aplicados -->
        <div class="aplicadas-badge">
            <span>Aplicadas</span>
            <span class="count">5 incidentes</span>
        </div>

        <!-- Controles de zoom -->
        <div class="zoom-controls">
            <button class="zoom-btn" onclick="zoomIn()">+</button>
            <button class="zoom-btn" onclick="zoomOut()">‚àí</button>
        </div>

        <!-- Bot√≥n de ubicaci√≥n -->
        <button class="ubicacion-btn" onclick="centrarUbicacion()" title="Centrar ubicaci√≥n">‚äô</button>

        <!-- Marcadores de incidentes (se generar√°n din√°micamente) -->
        <div id="marcadores-container"></div>
    </div>

    <!-- Bot√≥n para cambiar a vista de lista -->
    <button class="vista-lista-btn" onclick="mostrarVistaLista()">Ver lista</button>
</div>

<!-- VISTA 2: Lista de incidentes -->
<div id="vista-lista" class="vista">
    <header class="header">
        <button class="back-btn" onclick="volverAMapa()">‚Üê</button>
        <div class="header-content">
            <h1>Lista de incidentes</h1>
            <p class="subtitle" id="lista-contador">5 resultados</p>
        </div>
        <button class="mapa-btn" onclick="volverAMapa()" title="Ver mapa">‚ñ¶</button>
    </header>

    <!-- Filtros -->
    <div class="priority-filters">
        <button class="filter-btn" onclick="toggleFiltrosModal()">
            <span class="icon">‚öôÔ∏è</span> Filtros
        </button>
        <button class="priority-btn alta" onclick="filtrarEnLista('alta')">Alta</button>
        <button class="priority-btn media" onclick="filtrarEnLista('media')">Media</button>
        <button class="priority-btn baja" onclick="filtrarEnLista('baja')">Baja</button>
    </div>

    <!-- Ordenar -->
    <div class="ordenar-bar">
        <span class="ordenar-label">‚Üï Ordenar por:</span>
        <button class="orden-btn active" onclick="ordenarPor('reciente')">Reciente</button>
        <button class="orden-btn" onclick="ordenarPor('distancia')">Distancia</button>
    </div>

    <!-- Resultado y quitar filtros -->
    <div class="resultados-header lista">
        <span id="lista-mostrando">Mostrando 1 incidente</span>
        <button class="quitar-filtros" onclick="quitarFiltros()">‚úï Quitar filtros</button>
    </div>

    <!-- Lista de incidentes -->
    <div id="incidentes-lista" class="incidentes-lista">
        <!-- Los incidentes se generar√°n din√°micamente -->
    </div>
</div>

<!-- VISTA 3: Estado sin resultados -->
<div id="vista-sin-resultados" class="vista">
    <header class="header">
        <button class="back-btn" onclick="volverAMapa()">‚Üê</button>
        <h1>Mapa de incidentes</h1>
        <button class="menu-btn">‚ò∞</button>
    </header>

    <div class="search-bar">
        <input type="text" placeholder="Buscar por c√≥digo, placa o texto..." />
    </div>

    <div class="priority-filters">
        <button class="filter-btn" onclick="toggleFiltrosModal()">
            <span class="icon">‚öôÔ∏è</span> Filtros
        </button>
        <button class="priority-btn alta active">Alta</button>
        <button class="priority-btn media">Media</button>
        <button class="priority-btn baja">Baja</button>
    </div>

    <div class="resultados-header">
        <span>Mostrando 0 incidentes</span>
        <button class="quitar-filtros" onclick="quitarFiltros()">‚úï Quitar filtros</button>
    </div>

    <div class="sin-resultados">
        <h2>Sin resultados</h2>
        <p>No se encontraron incidentes con los filtros aplicados. Intenta ajustar los criterios de b√∫squeda.</p>
        <button class="btn-limpiar" onclick="limpiarFiltros()">Limpiar filtros</button>
    </div>
</div>

<!-- MODAL: Filtros -->
<div id="modal-filtros" class="modal">
    <div class="modal-overlay" onclick="toggleFiltrosModal()"></div>
    <div class="modal-content filtros-modal">
        <div class="modal-header">
            <h2>Filtros</h2>
            <button class="close-btn" onclick="toggleFiltrosModal()">‚úï</button>
        </div>

        <div class="modal-body">
            <!-- Prioridad -->
            <div class="filtro-section">
                <h3>Prioridad</h3>
                <div class="filtro-chips">
                    <button class="chip" onclick="toggleChip(this)" data-filtro="prioridad" data-valor="alta">Alta</button>
                    <button class="chip" onclick="toggleChip(this)" data-filtro="prioridad" data-valor="media">Media</button>
                    <button class="chip" onclick="toggleChip(this)" data-filtro="prioridad" data-valor="baja">Baja</button>
                </div>
            </div>

            <!-- Tipo de incidente -->
            <div class="filtro-section">
                <h3>Tipo de incidente</h3>
                <div class="filtro-opciones">
                    <button class="opcion-btn" onclick="toggleOpcion(this)" data-filtro="tipo" data-valor="alteracion">
                        <span class="opcion-icon">‚ö†Ô∏è</span>
                        <span class="opcion-texto">Alteraci√≥n</span>
                        <span class="opcion-check">‚òê</span>
                    </button>
                    <button class="opcion-btn" onclick="toggleOpcion(this)" data-filtro="tipo" data-valor="sospechoso">
                        <span class="opcion-icon">üëÅ</span>
                        <span class="opcion-texto">Sospechoso</span>
                        <span class="opcion-check">‚òê</span>
                    </button>
                    <button class="opcion-btn" onclick="toggleOpcion(this)" data-filtro="tipo" data-valor="ruido">
                        <span class="opcion-icon">üîä</span>
                        <span class="opcion-texto">Ruido</span>
                        <span class="opcion-check">‚òê</span>
                    </button>
                    <button class="opcion-btn" onclick="toggleOpcion(this)" data-filtro="tipo" data-valor="accidente">
                        <span class="opcion-icon">üöó</span>
                        <span class="opcion-texto">Accidente</span>
                        <span class="opcion-check">‚òë</span>
                    </button>
                    <button class="opcion-btn" onclick="toggleOpcion(this)" data-filtro="tipo" data-valor="robo">
                        <span class="opcion-icon">üõç</span>
                        <span class="opcion-texto">Robo</span>
                        <span class="opcion-check">‚òê</span>
                    </button>
                </div>
            </div>

            <!-- Tiempo -->
            <div class="filtro-section">
                <h3>Tiempo</h3>
                <div class="filtro-chips">
                    <button class="chip" onclick="toggleChipUnico(this)">√öltima hora</button>
                    <button class="chip" onclick="toggleChipUnico(this)">Hoy</button>
                    <button class="chip" onclick="toggleChipUnico(this)">Esta semana</button>
                    <button class="chip" onclick="toggleChipUnico(this)">Todos</button>
                </div>
            </div>

            <!-- Jurisdicci√≥n -->
            <div class="filtro-section">
                <h3>Jurisdicci√≥n</h3>
                <div class="filtro-radios">
                    <label class="radio-opcion">
                        <input type="radio" name="jurisdiccion" value="san-isidro" />
                        <span>San Isidro</span>
                    </label>
                    <label class="radio-opcion">
                        <input type="radio" name="jurisdiccion" value="miraflores" />
                        <span>Miraflores</span>
                    </label>
                    <label class="radio-opcion">
                        <input type="radio" name="jurisdiccion" value="san-borja" checked />
                        <span>San Borja</span>
                    </label>
                    <label class="radio-opcion">
                        <input type="radio" name="jurisdiccion" value="surco" />
                        <span>Surco</span>
                    </label>
                    <label class="radio-opcion">
                        <input type="radio" name="jurisdiccion" value="la-molina" />
                        <span>La Molina</span>
                    </label>
                </div>
            </div>
        </div>

        <div class="modal-footer">
            <button class="btn-secondary" onclick="limpiarFiltrosModal()">Limpiar</button>
            <button class="btn-primary" onclick="aplicarFiltros()">Aplicar y ver</button>
        </div>
    </div>
</div>

<!-- MODAL: Detalle del incidente -->
<div id="modal-detalle" class="modal">
    <div class="modal-overlay" onclick="cerrarDetalle()"></div>
    <div class="modal-content detalle-modal">
        <button class="close-btn-top" onclick="cerrarDetalle()">‚úï</button>

        <div class="detalle-header">
            <div class="detalle-info">
                <div class="detalle-codigo">
                    <span id="detalle-codigo">INC-2024-004</span>
                    <span class="badge-alta" id="detalle-badge">Alta</span>
                </div>
                <h3 id="detalle-titulo">Accidente de tr√°nsito menor</h3>
            </div>
        </div>

        <div class="detalle-body">
            <div class="detalle-item">
                <div class="detalle-texto">
                    <span class="detalle-label">Tipo</span>
                    <span class="detalle-value" id="detalle-tipo">Accidente de tr√°nsito</span>
                </div>
            </div>

            <div class="detalle-item">
                <div class="detalle-texto">
                    <span class="detalle-label">Ubicaci√≥n</span>
                    <span class="detalle-value" id="detalle-ubicacion">Av. Aviaci√≥n 234</span>
                    <span class="detalle-extra" id="detalle-distrito">San Borja ‚Ä¢ 0.3 km</span>
                </div>
            </div>

            <div class="detalle-item">
                <div class="detalle-texto">
                    <span class="detalle-label">Hora</span>
                    <span class="detalle-value" id="detalle-hora">Ahora</span>
                </div>
            </div>

            <div class="detalle-item">
                <span class="detalle-icon estado-activo">üü¢</span>
                <div class="detalle-texto">
                    <span class="detalle-label">Estado</span>
                    <span class="detalle-value" id="detalle-estado">Activo</span>
                </div>
            </div>
        </div>

        <div class="detalle-footer">
            <button class="btn-detalle-secondary" onclick="verDetalleCompleto()">
                üìÑ Ver detalle
            </button>
            <button class="btn-detalle-primary" onclick="navegarAIncidente()">
                ‚ûú Navegar
            </button>
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="footer">
    <div class="footer-container">
        <div class="footer-column">
            <div class="footer-logo">
                <img src="Secured-Landing-Page/public/assets/images/secured-logo-white.png" alt="Secured Logo" />
            </div>
            <p class="footer-description">Coordinaci√≥n inteligente para Serenazgo y Polic√≠a</p>
        </div>

        <div class="footer-column">
            <h4>Navegaci√≥n</h4>
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="#">Soluci√≥n</a></li>
                <li><a href="#">Startup</a></li>
                <li><a href="#">Equipo</a></li>
                <li><a href="#">Seguridad</a></li>
            </ul>
        </div>

        <div class="footer-column">
            <h4>Recursos</h4>
            <ul>
                <li><a href="#">Soporte</a></li>
                <li><a href="#">Documentaci√≥n</a></li>
                <li><a href="#">Privacidad</a></li>
                <li><a href="#">T√©rminos de servicio</a></li>
            </ul>
        </div>

        <div class="footer-column">
            <h4>Contacto</h4>
            <ul class="contact-list">
                <li>
                    <a href="mailto:contacto@secured.pe">contacto@secured.pe</a>
                </li>
                <li>
                    <a href="tel:+51987654321">+51 987 654 321</a>
                </li>
                <li>
                    <span>Lima, Per√∫</span>
                </li>
            </ul>
            <div class="social-icons">
                <a href="#" class="social-icon">f</a>
                <a href="#" class="social-icon">t</a>
                <a href="#" class="social-icon">in</a>
            </div>
        </div>
    </div>

    <div class="footer-bottom">
        <p>¬© 2025 Secured. Todos los derechos reservados.</p>
        <p class="privacy-note">Secured no recopila informaci√≥n personal identificable sin consentimiento expl√≠cito. Ver <a href="#">Pol√≠tica de Privacidad</a></p>
    </div>
</footer>

<!-- JS espec√≠fico -->
<script src="Secured-Landing-Page/public/assets/scripts/mapa-incidentes.js"></script>
</body>
</html>

