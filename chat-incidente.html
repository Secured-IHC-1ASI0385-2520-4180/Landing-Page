<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chat de Incidentes</title>
    <link rel="stylesheet" href="Secured-Landing-Page/public/assets/styles/chat-incidente.css" />
</head>
<body>

<!-- ================================
   VISTA 1: LISTA DE CHATS
================================= -->
<div id="lista-chats" class="view active">
    <header class="header">
        <a href="variaciones-varias.html" class="back-btn">←</a>
        <div class="header-title">
            <h1>Mensajes de incidentes</h1>
            <span class="header-subtitle">Coordina en tiempo real con tu equipo</span>
        </div>
        <div class="header-spacer"></div>
    </header>

    <div class="content">
        <!-- Chat 1 -->
        <div class="chat-item" onclick="openChat('INC-2024-001')">
            <div class="chat-left">
                <div class="chat-header">
                    <h3>INC-2024-001</h3>
                    <span class="badge-alta">Alta</span>
                </div>
                <p class="chat-title">Alteración del orden público - Pendiente</p>
            </div>
            <div class="chat-right">
                <span class="chat-time">10:45</span>
                <span class="badge-unread">3</span>
            </div>
        </div>

        <!-- Chat 2 -->
        <div class="chat-item" onclick="openChat('INC-2024-002')">
            <div class="chat-left">
                <div class="chat-header">
                    <h3>INC-2024-002</h3>
                    <span class="badge-media">Media</span>
                </div>
                <p class="chat-title">Vehículo sospechoso estacionado - Resuelto</p>
            </div>
            <div class="chat-right">
                <span class="chat-time">09:30</span>
            </div>
        </div>

        <!-- Chat 3 -->
        <div class="chat-item" onclick="openChat('INC-2024-003')">
            <div class="chat-left">
                <div class="chat-header">
                    <h3>INC-2024-003</h3>
                    <span class="badge-baja">Baja</span>
                </div>
                <p class="chat-title">Ruido excesivo en local comercial - Resuelto</p>
            </div>
            <div class="chat-right">
                <span class="chat-time">Ayer</span>
                <span class="badge-unread">1</span>
            </div>
        </div>
    </div>
</div>

<!-- ================================
   VISTA 2: CHAT INDIVIDUAL
================================= -->
<div id="chat-individual" class="view">
    <header class="header">
        <button class="back-btn" onclick="closeChat()">←</button>
        <div class="header-title">
            <h1 id="chat-id">INC-2024-001</h1>
            <span class="header-subtitle" id="chat-subtitle">Alteración del orden público</span>
        </div>
        <button class="icon-btn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2"/>
                <polyline points="14 2 14 8 20 8" stroke="currentColor" stroke-width="2"/>
            </svg>
        </button>
    </header>

    <div class="chat-messages" id="chat-messages">
        <!-- Notificación de sistema -->
        <div class="system-message">
            La unidad Policía-02 se unió al chat
        </div>

        <!-- Mensaje del sistema -->
        <div class="message-group">
            <div class="message-header">
                <span class="sender-name">Central</span>
                <span class="sender-role">Serenazgo</span>
            </div>
            <div class="message received">
                <p>Incidente reportado en Av. Principal 123</p>
                <span class="message-time">10:30</span>
            </div>
        </div>

        <!-- Mensajes enviados -->
        <div class="message sent">
            <p>Recibido. Nos dirigimos al lugar</p>
            <span class="message-time">10:32 ✓✓</span>
        </div>

        <div class="message sent with-image">
            <div class="message-image">
                <img src="Secured-Landing-Page/public/assets/images/chat-incidente.png" alt="Evidencia" />
            </div>
            <p>Se requiere apoyo policial</p>
            <span class="message-time">10:35 ✓✓</span>
        </div>
    </div>

    <!-- Input de mensaje -->
    <div class="chat-input">
        <button class="attach-btn" onclick="openAttachModal()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </button>
        <input type="text" id="message-input" placeholder="Escribe un mensaje..." />
        <button class="send-btn" onclick="sendMessage()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <line x1="22" y1="2" x2="11" y2="13" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <polygon points="22 2 15 22 11 13 2 9 22 2" fill="white"/>
            </svg>
        </button>
    </div>

    <!-- Opciones rápidas -->
    <div class="quick-actions">
        <button class="quick-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <rect x="3" y="3" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                <rect x="14" y="3" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                <rect x="14" y="14" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                <rect x="3" y="14" width="7" height="7" stroke="currentColor" stroke-width="2"/>
            </svg>
            Foto rápida
        </button>
        <button class="quick-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                <polyline points="12 6 12 12 16 14" stroke="currentColor" stroke-width="2"/>
            </svg>
            PTT
        </button>
    </div>
</div>

<!-- ================================
   MODAL: ADJUNTAR EVIDENCIA
================================= -->
<div id="attach-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Adjuntar evidencia</h3>
            <button class="close-modal" onclick="closeAttachModal()">×</button>
        </div>
        <div class="modal-body">
            <div class="attach-grid">
                <button class="attach-option" onclick="selectAttachment('camera')">
                    <div class="attach-icon camera">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                            <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z" stroke="currentColor" stroke-width="2"/>
                            <circle cx="12" cy="13" r="4" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <span>Cámara</span>
                </button>

                <button class="attach-option" onclick="selectAttachment('gallery')">
                    <div class="attach-icon gallery">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
                            <circle cx="8.5" cy="8.5" r="1.5" fill="currentColor"/>
                            <polyline points="21 15 16 10 5 21" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <span>Galería</span>
                </button>

                <button class="attach-option" onclick="selectAttachment('voice')">
                    <div class="attach-icon voice">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                            <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z" stroke="currentColor" stroke-width="2"/>
                            <path d="M19 10v2a7 7 0 0 1-14 0v-2M12 19v4M8 23h8" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <span>Nota de voz</span>
                </button>

                <button class="attach-option" onclick="selectAttachment('files')">
                    <div class="attach-icon files">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                            <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z" stroke="currentColor" stroke-width="2"/>
                            <polyline points="13 2 13 9 20 9" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <span>Otros Archivos</span>
                </button>
            </div>
        </div>
    </div>
</div>

<script src="Secured-Landing-Page/public/assets/scripts/chat-incidente.js"></script>
</body>
</html>

