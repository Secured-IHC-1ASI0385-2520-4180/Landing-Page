<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Incidente - Secured</title>
    <link rel="stylesheet" href="Secured-Landing-Page/public/assets/styles/crear-incidente.css">
    <link rel="icon" href="Secured-Landing-Page/public/favicon.ico" type="image/x-icon">
</head>
<body>

<!-- Paso 1: Formulario inicial -->
<div id="step1" class="view active">
    <header class="header">
        <a href="home-serenazgo.html" class="back-btn">‚Üê</a>
        <div class="header-title">
            <h1>Nuevo reporte</h1>
            <span class="header-subtitle">Paso 1 de 4</span>
        </div>
        <div class="header-spacer"></div>
    </header>

    <div class="content">
        <div class="info-box info">
            <svg class="info-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="10" stroke="#0066CC" stroke-width="2"/>
                <path d="M12 16V12M12 8h.01" stroke="#0066CC" stroke-width="2"/>
            </svg>
            <div class="info-text">
                <strong>Importante:</strong><br>
                Completa la informaci√≥n b√°sica del incidente. Los campos marcados con <span class="required">*</span> son obligatorios.
            </div>
        </div>

        <form id="incidentForm">
            <div class="form-group">
                <label for="incidentType">Tipo de incidente <span class="required">*</span></label>
                <div class="select-field" id="incidentTypeField">
                    <span class="select-placeholder">Selecciona el tipo de incidente</span>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M9 18l6-6-6-6"/>
                    </svg>
                </div>
                <input type="hidden" id="incidentType" name="incidentType" required>
            </div>

            <div class="form-group">
                <label for="description">Descripci√≥n del incidente <span class="required">*</span></label>
                <textarea
                        id="description"
                        name="description"
                        rows="4"
                        placeholder="Describe brevemente lo que est√° ocurriendo..."
                        required
                ></textarea>
            </div>

            <div class="form-group">
                <label>Prioridad (opcional)</label>
                <div class="priority-selector">
                    <button type="button" class="priority-btn" data-priority="alta">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M12 2L4 8l8 6 8-6-8-6z" fill="#EF4444" stroke="#EF4444" stroke-width="2"/>
                            <path d="M12 2v12" stroke="#EF4444" stroke-width="2"/>
                        </svg>
                        <span>Alta</span>
                    </button>
                    <button type="button" class="priority-btn" data-priority="media">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="10" stroke="#F59E0B" stroke-width="2"/>
                            <path d="M12 16V12M12 8h.01" stroke="#F59E0B" stroke-width="2"/>
                        </svg>
                        <span>Media</span>
                    </button>
                    <button type="button" class="priority-btn" data-priority="baja">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="10" stroke="#6B7280" stroke-width="2"/>
                            <circle cx="12" cy="12" r="3" fill="#6B7280"/>
                        </svg>
                        <span>Baja</span>
                    </button>
                </div>
            </div>
        </form>
    </div>

    <div class="footer-actions">
        <button class="btn btn-primary" id="continueBtn" disabled>Continuar</button>
    </div>
</div>
</div>

<!-- Paso 2: Confirmar ubicaci√≥n -->
<div id="step2" class="view">
    <header class="header">
        <button class="back-btn" id="backToStep1">‚Üê</button>
        <div class="header-title">
            <h1>Ubicaci√≥n del incidente</h1>
            <span class="header-subtitle">Paso 2 de 4</span>
        </div>
        <div class="header-spacer"></div>
    </header>

    <div class="content">
        <div class="map-container">
            <img src="Secured-Landing-Page/public/assets/images/crear-incidente.png" alt="Mapa" class="map-image">
            <div class="location-marker">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="#EF4444">
                    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                </svg>
            </div>
        </div>

        <div class="location-info">
            <div class="info-box">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#0066CC">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
                    <circle cx="12" cy="10" r="3"/>
                </svg>
                <div class="location-text">
                    <strong>Ubicaci√≥n detectada:</strong><br>
                    <span id="detectedLocation">Av. Larco 345, Miraflores, Lima</span>
                </div>
            </div>

            <button class="btn btn-outline" id="changeLocationBtn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M12 6v6l4 2"/>
                </svg>
                Cambiar ubicaci√≥n
            </button>
        </div>
    </div>

    <div class="footer-actions">
        <button class="btn btn-primary" id="confirmLocationBtn">Confirmar ubicaci√≥n</button>
    </div>
</div>
</div>

<!-- Paso 3: Adjuntar evidencias -->
<div id="step3" class="view">
    <header class="header">
        <button class="back-btn" id="backToStep2">‚Üê</button>
        <div class="header-title">
            <h1>Adjuntar evidencias</h1>
            <span class="header-subtitle">Paso 3 de 4</span>
        </div>
        <div class="header-spacer"></div>
    </header>

    <div class="content">
        <div class="info-box warning">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M12 2L2 20h20L12 2z" stroke="#F59E0B" stroke-width="2"/>
                <path d="M12 9v4M12 17h.01" stroke="#F59E0B" stroke-width="2"/>
            </svg>
            <div class="info-text">
                <strong>Importante:</strong><br>
                Se requiere al menos 1 evidencia para enviar el reporte a despacho.
            </div>
        </div>

        <button class="btn btn-outline add-evidence-btn" id="addEvidenceBtn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
            Adjuntar evidencia
        </button>

        <div id="evidenceList" class="evidence-list">
            <!-- Las evidencias se agregar√°n din√°micamente aqu√≠ -->
        </div>

        <p class="evidence-count" id="evidenceCount">0 archivos adjuntos</p>
    </div>

    <div class="footer-actions">
        <button class="btn btn-outline" id="addMoreEvidencesBtn" style="display: none;">Adjuntar m√°s evidencias</button>
        <button class="btn btn-primary" id="nextToSummaryBtn" disabled>Siguiente</button>
    </div>
</div>
</div>

<!-- Paso 4: Resumen del reporte -->
<div id="step4" class="view">
    <header class="header">
        <button class="back-btn" id="backToStep3">‚Üê</button>
        <div class="header-title">
            <h1>Resumen del reporte</h1>
            <span class="header-subtitle">Paso 4 de 4</span>
        </div>
        <div class="header-spacer"></div>
    </header>

    <div class="content">
        <div class="summary-card">
            <div class="summary-item">
                <div class="summary-icon incident-type-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M12 2L2 20h20L12 2z" stroke="#0066CC" stroke-width="2"/>
                        <path d="M12 9v4M12 17h.01" stroke="#0066CC" stroke-width="2"/>
                    </svg>
                </div>
                <div class="summary-content">
                    <label>Tipo de incidente</label>
                    <p id="summaryIncidentType">Actividad sospechosa</p>
                </div>
            </div>

            <div class="summary-item">
                <div class="summary-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#6B7280">
                        <path d="M9 12h6M9 16h6M9 8h6M6 2h12v20H6z"/>
                    </svg>
                </div>
                <div class="summary-content">
                    <label>Descripci√≥n</label>
                    <p id="summaryDescription">Un sospechoso en un banco</p>
                </div>
            </div>

            <div class="summary-item">
                <div class="summary-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M12 2L2 20h20L12 2z" stroke="#EF4444" stroke-width="2" fill="#EF4444"/>
                    </svg>
                </div>
                <div class="summary-content">
                    <label>Prioridad</label>
                    <p id="summaryPriority" class="priority-high">Alta</p>
                </div>
            </div>

            <div class="summary-item">
                <div class="summary-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#6B7280">
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>
                        <circle cx="12" cy="10" r="3"/>
                    </svg>
                </div>
                <div class="summary-content">
                    <label>Ubicaci√≥n</label>
                    <p id="summaryLocation">Av. Larco 345, Miraflores, Lima</p>
                </div>
            </div>

            <div class="summary-item">
                <div class="summary-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#6B7280">
                        <path d="M21.44 11.05l-9.19 9.19a6 6 0 01-8.49-8.49l9.19-9.19a4 4 0 015.66 5.66l-9.2 9.19a2 2 0 01-2.83-2.83l8.49-8.48"/>
                    </svg>
                </div>
                <div class="summary-content">
                    <label>Evidencias</label>
                    <p id="summaryEvidences">2 archivos adjuntos</p>
                </div>
            </div>
        </div>

        <div class="info-box info">
            <svg class="info-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="10" stroke="#0066CC" stroke-width="2"/>
                <path d="M12 16V12M12 8h.01" stroke="#0066CC" stroke-width="2"/>
            </svg>
            <div class="info-text">
                Al enviar, el reporte ser√° registrado y notificado a despacho para su asignaci√≥n.
            </div>
        </div>
    </div>

    <div class="footer-actions">
        <button class="btn btn-primary" id="sendReportBtn">Enviar reporte</button>
        <button class="btn btn-outline" id="saveDraftBtn">Guardar como borrador</button>
    </div>
</div>

<!-- Modal: Confirmaci√≥n de borrador guardado -->
<div id="draftSavedModal" class="modal">
    <div class="modal-content success-modal">
        <div class="success-icon">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="10" fill="#10B981" opacity="0.2"/>
                <path d="M9 12l2 2 4-4" stroke="#10B981" stroke-width="2" fill="none"/>
            </svg>
        </div>
        <h2>¬°Borrador guardado!</h2>
        <p>Tu reporte se ha guardado como borrador. Podr√°s completarlo y enviarlo m√°s tarde desde tu lista de pendientes.</p>
        <button class="btn btn-outline" id="createAnotherDraft">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
            Crear otro reporte
        </button>
        <button class="btn btn-link" id="backToHomeFromDraft">Volver al inicio</button>
    </div>
</div>

<!-- Modal: Confirmaci√≥n de reporte enviado -->
<div id="reportSentModal" class="modal">
    <div class="modal-content success-modal">
        <div class="success-icon">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="10" fill="#10B981" opacity="0.2"/>
                <path d="M9 12l2 2 4-4" stroke="#10B981" stroke-width="2" fill="none"/>
            </svg>
        </div>
        <h2>¬°Reporte creado exitosamente!</h2>
        <p>El reporte ha sido registrado y enviado a despacho. Recibir√°s notificaciones sobre su estado.</p>
        <button class="btn btn-primary" id="viewOnMapBtn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
            </svg>
            Ver en mapa
        </button>
        <button class="btn btn-outline" id="createAnotherReport">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
            Crear otro reporte
        </button>
        <button class="btn btn-link" id="backToHomeFromReport">Volver al inicio</button>

        <div class="info-box info next-steps">
            <strong>Pr√≥ximos pasos:</strong>
            <ul>
                <li>‚Ä¢ El reporte ser√° evaluado por despacho</li>
                <li>‚Ä¢ Se asignar√° a una unidad disponible</li>
                <li>‚Ä¢ Recibir√°s actualizaciones en tiempo real</li>
            </ul>
        </div>
    </div>
</div>

<!-- Modal: Seleccionar tipo de incidente -->
<div id="incidentTypeModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Seleccionar tipo de incidente</h3>
            <button class="close-modal" id="closeIncidentTypeModal">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
        </div>
        <div class="modal-body">
            <div class="incident-type-list">
                <button class="incident-type-item" data-type="Actividad sospechosa">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M12 2L2 20h20L12 2z"/>
                    </svg>
                    <span>Actividad sospechosa</span>
                </button>
                <button class="incident-type-item" data-type="Robo">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M16 11V7a4 4 0 00-8 0v4M5 11h14l1 11H4l1-11z"/>
                    </svg>
                    <span>Robo</span>
                </button>
                <button class="incident-type-item" data-type="Accidente de tr√°nsito">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3M12 17h.01"/>
                    </svg>
                    <span>Accidente de tr√°nsito</span>
                </button>
                <button class="incident-type-item" data-type="Alteraci√≥n del orden p√∫blico">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M16 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2M8.5 11a4 4 0 100-8 4 4 0 000 8zM17 11l2 2 4-4"/>
                    </svg>
                    <span>Alteraci√≥n del orden p√∫blico</span>
                </button>
                <button class="incident-type-item" data-type="Problema de alumbrado">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/>
                        <circle cx="12" cy="12" r="5"/>
                    </svg>
                    <span>Problema de alumbrado</span>
                </button>
                <button class="incident-type-item" data-type="Otros">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="12" cy="12" r="1"/>
                        <circle cx="19" cy="12" r="1"/>
                        <circle cx="5" cy="12" r="1"/>
                    </svg>
                    <span>Otros</span>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Permiso de micr√≥fono -->
<div id="microphonePermissionModal" class="modal">
    <div class="modal-content permission-modal">
        <div class="permission-icon">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="#EF4444">
                <path d="M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3zM19 10v2a7 7 0 01-14 0v-2M12 19v4M8 23h8"/>
            </svg>
        </div>
        <h2>Permiso de micr√≥fono</h2>
        <p>Se necesita acceso al micr√≥fono para grabar notas de audio que complementen el reporte.</p>
        <div class="info-box info">
            <strong>¬øPor qu√© es necesario?</strong><br>
            Las notas de audio permiten capturar detalles adicionales de manera r√°pida mientras est√°s en el campo.
        </div>
        <button class="btn btn-primary" id="allowMicrophoneBtn">Permitir</button>
        <button class="btn btn-link" id="denyMicrophoneBtn">Ahora no</button>
    </div>
</div>

<!-- Modal: Opciones de evidencia -->
<div id="evidenceOptionsModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Seleccionar tipo de evidencia</h3>
            <button class="close-modal" id="closeEvidenceOptionsModal">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                </svg>
            </button>
        </div>
        <div class="modal-body">
            <button class="evidence-option" id="takePhotoOption">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z"/>
                    <circle cx="12" cy="13" r="4"/>
                </svg>
                <span>Tomar foto</span>
            </button>
            <button class="evidence-option" id="recordAudioOption">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3zM19 10v2a7 7 0 01-14 0v-2"/>
                </svg>
                <span>Grabar audio</span>
            </button>
            <button class="evidence-option" id="uploadFileOption">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                </svg>
                <span>Subir archivo</span>
            </button>
        </div>
    </div>
</div>

<input type="file" id="fileInput" accept="image/*,audio/*" style="display: none;">
</div>

<!-- Footer -->
<footer class="footer">
    <div class="footer-container">
        <div class="footer-column">
            <div class="footer-logo">
                <img src="Secured-Landing-Page/public/assets/images/Secured_Logo_v1.png" alt="Secured Logo" />
                <h3>Secured</h3>
            </div>
            <p class="footer-description">Coordinaci√≥n inteligente para Serenazgo y Polic√≠a</p>
        </div>

        <div class="footer-column">
            <h4>Navegaci√≥n</h4>
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="#">Soluci√≥n</a></li>
                <li><a href="#">Startup</a></li>
                <li><a href="#">Equipo</a></li>
                <li><a href="#">Seguridad</a></li>
            </ul>
        </div>

        <div class="footer-column">
            <h4>Recursos</h4>
            <ul>
                <li><a href="#">Soporte</a></li>
                <li><a href="#">Documentaci√≥n</a></li>
                <li><a href="#">Privacidad</a></li>
                <li><a href="#">T√©rminos de servicio</a></li>
            </ul>
        </div>

        <div class="footer-column">
            <h4>Contacto</h4>
            <ul class="contact-list">
                <li>
                    <span class="icon">‚úâ</span>
                    <a href="mailto:contacto@secured.pe">contacto@secured.pe</a>
                </li>
                <li>
                    <span class="icon">üìû</span>
                    <a href="tel:+51987654321">+51 987 654 321</a>
                </li>
                <li>
                    <span class="icon">üìç</span>
                    <span>Lima, Per√∫</span>
                </li>
            </ul>
            <div class="social-icons">
                <a href="#" class="social-icon">f</a>
                <a href="#" class="social-icon">üê¶</a>
                <a href="#" class="social-icon">in</a>
            </div>
        </div>
    </div>

    <div class="footer-bottom">
        <p>¬© 2025 Secured. Todos los derechos reservados.</p>
        <p class="privacy-note">Secured no recopila informaci√≥n personal identificable sin consentimiento expl√≠cito. Ver <a href="#">Pol√≠tica de Privacidad</a></p>
    </div>
</footer>

<script src="Secured-Landing-Page/public/assets/scripts/crear-incidente.js"></script>
</body>
</html>

